# First tutorial on the EFA Linker

The EFA linker is a software that helps build Linkable Modules, Link already existing linkable modules together, and create a final loadable program for the EFA architecture. 

## The changes
Here we summarize some of the major changes that the linker infrastructure will bring to the current applications:

* **No need to include EFA_v2:** We have created an interface that is as close as possible to the original EFA interface. However, this interface has been created to allow for the symbols to remain unresolved until the linking process.
    * ACTION: remove `from EFA_v2 import EFA, State, Transition` from your code.
* **No need to create a new EFA object:** The EFA object is created by the linker during generation of the loadable file. The linker will create the EFA object and will resolve all the symbols. 
    * ACTION: remove `efa = EFA([])` from your code.
* **Change in the state creation**: Previously, states were created as independent objects. Now the state interface is associated to the efa interface.
    * ACTION: change `state = State("S1")` to `state = efa.State("S1")`. Using `add_state` is supported, but it is a no-op.
* **Remove all attempts to manage your own symbols**: Previous code usually created a look up table or a custom made system to allow for symbols to be resolved. This often had the name of `event_labels[]` and it was a map between string and integers. The linker will now assign the final linker symbol to each transition, state, and shared block.
    * ACTION: remove all code that manages symbols. Use the symbol directly into your code:



The following is an example of a segment of code taken from Triangle Count that shows what are the modifications:


```python
from EFA_v2 import *

def GenerateTriEFA():
    efa = EFA([])

    state0 = State() #Initial State? 
    efa.add_initId(state0.state_id)

    #Add events to dictionary 
    event_map = {
        'v1_launch':0,
        'nv1_return':1,
        'v2_return':2,
        'nv2_return':3
    }

    tran0 = state0.writeTransition("eventCarry", state0, state0, event_map['v1_launch'])
    
    tr_str = "send_dmlm_ld_wret UDPR_3 " + str(event_map["nv1_return"]) + " " + blkbytes + " 0"  #fetch v1 neighbors
     
    return efa
```

The new code will look like this:

```python
from linker.EFAProgram import efaProgram

@efaProgram
def GenerateTriEFA(efa):
    
    state0 = efa.State("S0") #Initial State? 
    efa.add_initId(state0.state_id)
    efa.add_state(state0)

    tran0 = state0.writeTransition("eventCarry", state0, state0, 'v1_launch')
    
    tr_str = "send_dmlm_ld_wret UDPR_3 nv1_return " + blkbytes + " 0"  #fetch v1 neighbors
     
    return efa
```

Notice that it is still possible to use macros that are resolved at the time code is generated. In the example above `blkbytes` will be resolved prior to creating the linkable module.

## The new interface
The new interface starts with a decorator (@efaProgram) that allows the linker to identify the function that will generate a new linkable module. There are no limits to the number of functions that are passed with decorators, the linker will find them all and generate independent linkable modules for each one of them. The code will be executed during the first part of the linker. Following, states, transitions, shared blocks, static data values, and actions will be stored in a memory representation. Then it will be complimented and linked against other linkable modules. Finally, the linker will generate a loadable file that can be executed on the EFA architecture.

### Creating the linkable module:

Using a function that receives an argument (e.g., efa for backward compatibility), decorate this function with @efaProgram.

```python
from linker.EFAProgram import efaProgram

@efaProgram
def GenerateTriEFA(efa):
    # Code to generate the EFA
    return efa
```

### Creating states:

The efa passed into the function from the linkable module has a `State` creation interface. Use the following code to create a new state:

```python
    state0 = efa.State("S0")
```

The string is optional but recommended for keeping track of state names later on. 

### Creating transitions:

The state object returned by `efa.State` has a `writeTransition` function that allows for the creation of transitions. The function receives the following arguments:

```python
    tran0 = state0.writeTransition("eventCarry", state0, state0, 'v1_launch')
```

Again, notice that the last argument is a string, that represents the name of the event transition. This name will be used to resolve the symbol later on. Do not try to use your own integer ID system. This will conflict with the linker later on.

### Creating shared blocks:

Shared blocks are collection of actions that can be triggered at the end of a transition. The efa object has a `appendBlockAction` function that receives the name of the block, followed by the action to be added.

```python
    efa.appendBlockAction(
        "block_1", "beq UDPR_9 UDPR_12 alldone"
    )
```

### Creating static data:

Another advantage of a linker is to be able to create static data, and let the linker allocate it in the memory. The efa object has a `addStaticData` function that receives the name of the static data, followed by the size of the data to be allocated.

```python
    efa.addStaticData(
        "static_data", "1024"
    )
```

Once allocated, the symbol can be used throughout the program. During loading, the symbol will be replaced by its corresponding memory location. Address space is configurable. See below

### Creating actions:
Both transitions and shared blocks can have actions. The efa object has a `addAction` function that receives the name of the action, followed by the action to be added.

```python
    efa.writeAction(
        "mov_imm2reg VarName X16"
    )
```

Notice that here we assume VarName is a static data that was previously allocated. Therefore, it will be translated to an immediate value containing the address of the static data.

## Target labels:

The linker also recognizes target labels. These are stored and used during the linking process, including privatization as will be explained below:

```python
    efa.writeAction(
        "someLabel: mov_imm2reg VarName X16"
    )
```

## Privatization vs linkable symbols:

The only linkable symbols are: Transitions of type `EventCarry` (i.e., event labels), shared blocks based on the name of the shared block, and static data based on the name of the static data. All other symbols are private to the linkable module.

Name for private symbols are mangaled to avoid conflicts with other linkable modules. The mangaling is done by adding the name of the linkable module to the symbol. For example, if the linkable module is called `GenerateTriEFA`, then the symbol `state0` will be translated to `GenerateTriEFA_xxxxx_state0`, where `xxxxx` is a random string that is generated during the linking process.

After linking it is possible to observe that these symbol names changed. 

## The hello world example:

The following example shows the linking of two linkable modules with no particular meaning whatsoever (These can be found in the tests folder):

This is the first file `testInput.py`

```python
from linker.EFAProgram import efaProgram


@efaProgram
def simpleProgram(efa):
    efa.addStaticData("Variable", 100)

    state0 = efa.State()
    state1 = efa.State("newState")

    tran0 = state0.writeTransition("eventCarry", state0, state1, "v1_launch")

    tran0.writeAction("mov_ob2reg X0 X14")
    tran0.writeAction("some_label: mov_reg2reg X1 X2")
    tran0.writeAction("some_label: mov_reg2reg X1 v1_launch")

    efa.appendBlockAction("block_1", "beq UDPR_9 UDPR_12 alldone")
    efa.appendBlockAction("block_1", "alldone: mov_reg2ob X0 X14")

```

This is the second file `testInput2.py`

```python
from linker.EFAProgram import efaProgram

@efaProgram
def simpleProgram2(efa):
    state0 = efa.State()  # Initial State?
    state1 = efa.State("newState2")  # tri Count State

    tran0 = state0.writeTransition("eventCarry", state0, state1, "v2_launch")
    # Create the thread context
    tran0.writeAction("mov_ob2reg X0 X14")
    tran0.writeAction("some_label: mov_reg2reg X1 X2")
    tran0.writeAction("mov_reg2reg Variable X2")
    tran0.writeAction("some_label: mov_reg2reg X1 v1_launch")


    efa.appendBlockAction(
        "block_2", "beq UDPR_9 UDPR_12 v2_launch"
    )  # check v1 iterator

```

The resulting linkable module is:

```python

from linker.EFAProgram import efaProgram

@efaProgram
def efaProgram_output(efa):

    ## simpleProgram_wizrr_state1
    simpleProgram_wizrr_state1 = efa.State("simpleProgram_wizrr_state1")
    efa.add_state(simpleProgram_wizrr_state1)
    ## simpleProgram_wizrr_newState
    simpleProgram_wizrr_newState = efa.State("simpleProgram_wizrr_newState")
    efa.add_state(simpleProgram_wizrr_newState)
    ## simpleProgram2_cuofg_state1
    simpleProgram2_cuofg_state1 = efa.State("simpleProgram2_cuofg_state1")
    efa.add_state(simpleProgram2_cuofg_state1)
    ## simpleProgram2_cuofg_newState2
    simpleProgram2_cuofg_newState2 = efa.State("simpleProgram2_cuofg_newState2")
    efa.add_state(simpleProgram2_cuofg_newState2)

    ## v1_launch
    v1_launch = simpleProgram2_cuofg_newState2.writeTransition("eventCarry", simpleProgram_wizrr_state1, simpleProgram_wizrr_newState, "v1_launch")
    v1_launch.writeAction("mov_ob2reg X0 X14")
    v1_launch.writeAction("simpleProgram_wizrr_some_label: mov_reg2reg X1 X2")
    v1_launch.writeAction("mov_reg2reg Variable X2")
    v1_launch.writeAction("simpleProgram_wizrr_some_label: mov_reg2reg X1 v1_launch")

    ## v2_launch
    v2_launch = simpleProgram2_cuofg_newState2.writeTransition("eventCarry", simpleProgram2_cuofg_state1, simpleProgram2_cuofg_newState2, "v2_launch")
    v2_launch.writeAction("mov_ob2reg X0 X14")
    v2_launch.writeAction("simpleProgram2_cuofg_some_label: mov_reg2reg X1 X2")
    v2_launch.writeAction("simpleProgram2_cuofg_some_label: mov_reg2reg X1 v1_launch")

    ## block_1
    efa.appendBlockAction("block_1", "beq UDPR_9 UDPR_12 simpleProgram_wizrr_alldone")
    efa.appendBlockAction("block_1", "simpleProgram_wizrr_alldone: mov_reg2ob X0 X14")
    ## block_2
    efa.appendBlockAction("block_2", "beq UDPR_9 UDPR_12 v2_launch")

```

The command used for generating this file is:

```bash
> ./EFAlinker.py testInput.py testInput2.py -f linkable-module
```

Notice that the linker creates a separate file that contains the resulting linkable module. This is, the two files are only consumed to execute the linkable module program and obtain the resulting states, transitions, shared blocks, static data and actions. 

Also notice that exportable symbols (e.g., "Variable", "block_1", "block_2", "v1_launch", "v2_launch") are not mangled. This is because they are exported to the linker and the linker needs to know the name of the symbol to be able to link the two linkable modules.

Finally, noyice that there are names used for the transitions and states that have to do with the original symbol. 

A consequence of the above behavior is that macros will be resolved during construction of the EFA program. 

## The loadable module example:

It is possible to generate a loadable module that has all the symbols resolved. This requires all the symbols to be resolved, otherwise an error will be shown. The resulting loadable module from the previous example, using a base address of 1234 is:

```python

from EFA_v2 import EFA, State, Transition

def efaProgram_output(efa):

    ## simpleProgram_rtxwx_state1 with ID 0
    simpleProgram_rtxwx_state1_0 = State()
    efa.add_state(simpleProgram_rtxwx_state1_0)
    ## simpleProgram_rtxwx_newState with ID 1
    simpleProgram_rtxwx_newState_1 = State()
    efa.add_state(simpleProgram_rtxwx_newState_1)
    ## simpleProgram2_odbui_state1 with ID 2
    simpleProgram2_odbui_state1_2 = State()
    efa.add_state(simpleProgram2_odbui_state1_2)
    ## simpleProgram2_odbui_newState2 with ID 3
    simpleProgram2_odbui_newState2_3 = State()
    efa.add_state(simpleProgram2_odbui_newState2_3)

    ## v1_launch with ID 0
    v1_launch_0 = simpleProgram2_odbui_newState2_3.writeTransition("eventCarry", simpleProgram_rtxwx_state1_0, simpleProgram_rtxwx_newState_0, 0)
    v1_launch_0.writeAction("mov_ob2reg X0 X14")
    v1_launch_0.writeAction("simpleProgram_rtxwx_some_label: mov_reg2reg X1 X2")
    v1_launch_0.writeAction("mov_reg2reg 1234 X2")
    v1_launch_0.writeAction("simpleProgram_rtxwx_some_label: mov_reg2reg X1 0")

    ## v2_launch with ID 1
    v2_launch_1 = simpleProgram2_odbui_newState2_3.writeTransition("eventCarry", simpleProgram2_odbui_state1_2, simpleProgram2_odbui_newState2_2, 1)
    v2_launch_1.writeAction("mov_ob2reg X0 X14")
    v2_launch_1.writeAction("simpleProgram2_odbui_some_label: mov_reg2reg X1 X2")
    v2_launch_1.writeAction("simpleProgram2_odbui_some_label: mov_reg2reg X1 0")

    ## block_1
    efa.appendBlockAction("block_1", "beq UDPR_9 UDPR_12 simpleProgram_rtxwx_alldone")
    efa.appendBlockAction("block_1", "simpleProgram_rtxwx_alldone: mov_reg2ob X0 X14")
    ## block_2
    efa.appendBlockAction("block_2", "beq UDPR_9 UDPR_12 1")


def main():
    efa = EFA([])
    efa.code_level = 'machine'
    efaProgram_output(efa)
    return efa

```

Notice that the symbols are all resolved into its corresponding values. Also, notice that `EFA_v2` is also used, and that there is a `main` function that returns the EFA object. This is the main program to be used when using this loadable module.

The command used for generating this file is:

```bash
> ./EFAlinker.py testInput.py testInput2.py -f loadable-module --base-addr 1234
```

### The header file. 

As part of the result of generating a loadable module is the creation of a header file for C++. This is to be used to get the name - ID relationship in the runtime program. The output file name is equal to that of python, but with the extension `.hpp`. The content of the header file for the previous example is:

```cpp
#ifndef __output_H__
#define __output_H__

namespace output {

    typedef unsigned int EventSymbol;

    constexpr EventSymbol v1_launch = 0;
    constexpr EventSymbol v2_launch = 1;

} // namespace

#endif
```

The namespace is used to avoid collision with other parts of the C++ top program. 

## Linker options

All the program options for the linker are summarized in the following script:

```bash
> ./EFAlinker.py --help
usage: EFAlinker.py [-h] [-o output] [-f format] [-d DEB_LEVEL] [-L LIB_PATH [LIB_PATH ...]] [--no-header] [--base-address BASE_ADDRESS]
                    inputFiles [inputFiles ...]

EFA Linker

positional arguments:
  inputFiles            List of input files to link

optional arguments:
  -h, --help            show this help message and exit
  -o output, --output output
                        Output file name
  -f format, --format format
                        Output format: raw, linkable-module, efa
  -d DEB_LEVEL, --debug-level DEB_LEVEL
                        Set debug level
  -L LIB_PATH [LIB_PATH ...], --library-path LIB_PATH [LIB_PATH ...]
                        Add a path where other libraries/python modules are to be searched for
  --no-header           Do not generate the header file
  --base-address BASE_ADDRESS
                        Base address of the program
```

## An SHT example:

SHT is a more complex example that uses the linker to generate a loadable module, and the it uses the loadable module as part of a top program. 

In order to observe this example please refer to the `examples/sht` folder. In this example we use as base the `apps/sht_test/sht_test.py` program that uses the sht macros.

There is a Makefile in this folder that generates the loadable module as well as compiles the top program. This Makefile assumes that the install directory is in the same top folder as the `updown` repository (see the `setup_env.sh` script to set this up as expected). Please follow the instructions on how to build the runtime with CMake

In order to run this program use:

```bash
> make all
```

This will generate the loadable module, and then compile the top program. The result is a binary called `sht_example.exe`. This program can be run as:

```bash
> ./sht_example.exe 16 16
```

Follow the documentation in SHT to obtain more information about this program. Following are the resulting loadable module and header files:

### The loadable module

```python
from EFA_v2 import EFA, State, Transition

def efaProgram_sht_test_out(efa):

    ## SHTExampleEFA_pydub_state1 with ID 0
    SHTExampleEFA_pydub_state1_0 = State()
    efa.add_state(SHTExampleEFA_pydub_state1_0)
    efa.add_initId(SHTExampleEFA_pydub_state1_0.state_id)

    ## entry_init with ID 0
    entry_init_0 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 0)
    entry_init_0.writeAction("print '[NWID %d] => ENTRY SHT init: X8 = %d, X9 = %d' X0 X8 X9")
    entry_init_0.writeAction("perflog 1 0 'init started, nwid = %d' X0")
    entry_init_0.writeAction("mov_reg2reg X8 X16")
    entry_init_0.writeAction("mov_imm2reg X18 8")
    entry_init_0.writeAction("mov_reg2reg X9 X17")
    entry_init_0.writeAction("add X9 X7 X20")
    entry_init_0.writeAction("bcopy_ops X8 X20 X18")
    entry_init_0.writeAction("ev_update_2 X18 10 255 5")
    entry_init_0.writeAction("ev_update_reg_2 X18 X18 X0 X0 8")
    entry_init_0.writeAction("send_wret X18 1 X20 8")
    entry_init_0.writeAction("yield")

    ## init_ret with ID 1
    init_ret_1 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 1)
    init_ret_1.writeAction("print '[NWID %d] => SHT init return: X8 = %d, X9 = %d' X0 X8 X9")
    init_ret_1.writeAction("move X16 0(X20) 0 8")
    init_ret_1.writeAction("move X17 8(X20) 0 8")
    init_ret_1.writeAction("mov_imm2reg X18 123")
    init_ret_1.writeAction("move X18 16(X20) 0 8")
    init_ret_1.writeAction("move X18 24(X20) 0 8")
    init_ret_1.writeAction("print '[NWID %d] => launching SHT update' X0")
    init_ret_1.writeAction("ev_update_2 X19 13 255 5")
    init_ret_1.writeAction("ev_update_reg_2 X19 X19 X0 X0 8")
    init_ret_1.writeAction("send_wret X19 2 X20 4")
    init_ret_1.writeAction("yield")

    ## update_ret with ID 2
    update_ret_2 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 2)
    update_ret_2.writeAction("print '[NWID %d] => SHT update return: X8 = %d, X9 = %d' X0 X8 X9")
    update_ret_2.writeAction("mov_imm2reg X18 123")
    update_ret_2.writeAction("print '[NWID %d] => launching SHT get' X0")
    update_ret_2.writeAction("ev_update_2 X19 14 255 5")
    update_ret_2.writeAction("ev_update_reg_2 X19 X19 X0 X0 8")
    update_ret_2.writeAction("sendr_wret X19 3 X16 X18")
    update_ret_2.writeAction("yield")

    ## get_ret with ID 3
    get_ret_3 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 3)
    get_ret_3.writeAction("print '[NWID %d] => SHT get return: X8 = %d, X9 = %d' X0 X8 X9")
    get_ret_3.writeAction("print '[NWID %d] => signaling TOP & terminating...' X0")
    get_ret_3.writeAction("mov_imm2reg X18 1")
    get_ret_3.writeAction("move X18 0(X7) 0 8")
    get_ret_3.writeAction("yield_terminate")

    ## SHTArrayBucket__initialize_TR with ID 4
    SHTArrayBucket__initialize_TR_4 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 4)
    SHTArrayBucket__initialize_TR_4.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] INIT: start' X0")
    SHTArrayBucket__initialize_TR_4.writeAction("add X8 X7 X16")
    SHTArrayBucket__initialize_TR_4.writeAction("addi X16 X17 0")
    SHTArrayBucket__initialize_TR_4.writeAction("mov_imm2reg X18 0")
    SHTArrayBucket__initialize_TR_4.writeAction("move X18 0(X17) 0 1")
    SHTArrayBucket__initialize_TR_4.writeAction("move X18 1(X17) 0 1")
    SHTArrayBucket__initialize_TR_4.writeAction("move X18 2(X17) 0 2")
    SHTArrayBucket__initialize_TR_4.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] INIT' X0")
    SHTArrayBucket__initialize_TR_4.writeAction("move X9 8(X16) 0 8")
    SHTArrayBucket__initialize_TR_4.writeAction("move X10 16(X16) 0 8")
    SHTArrayBucket__initialize_TR_4.writeAction("move X11 32(X16) 0 8")
    SHTArrayBucket__initialize_TR_4.writeAction("mov_imm2reg X18 0")
    SHTArrayBucket__initialize_TR_4.writeAction("move X18 24(X16) 0 8")
    SHTArrayBucket__initialize_TR_4.writeAction("move X18 40(X16) 0 8")
    SHTArrayBucket__initialize_TR_4.writeAction("sendr_wcont X1 X1 X0 X0")
    SHTArrayBucket__initialize_TR_4.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] INIT: done' X0")
    SHTArrayBucket__initialize_TR_4.writeAction("yield_terminate")

    ## SHTArrayBucket__update_TR with ID 5
    SHTArrayBucket__update_TR_5 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 5)
    SHTArrayBucket__update_TR_5.writeAction("add X8 X7 X28")
    SHTArrayBucket__update_TR_5.writeAction("addi X28 X16 0")
    SHTArrayBucket__update_TR_5.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__update_TR_5.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_write_begin_1_acquired")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] WRITE_BEGIN: writer lock busy, delay current event' X0")
    SHTArrayBucket__update_TR_5.writeAction("sendops_wcont X2 X1 X8 3")
    SHTArrayBucket__update_TR_5.writeAction("yield")
    SHTArrayBucket__update_TR_5.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_write_begin_1_acquired: addi X17 X17 1")
    SHTArrayBucket__update_TR_5.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] WRITE_BEGIN: writer lock free, acquire writer lock' X0")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: lock admitted, TID = %d' X0 TID")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: DESC_LM_ADDR = %d' X0 X28")
    SHTArrayBucket__update_TR_5.writeAction("mov_reg2reg X9 X29")
    SHTArrayBucket__update_TR_5.writeAction("mov_reg2reg X10 X30")
    SHTArrayBucket__update_TR_5.writeAction("mov_reg2reg X1 X31")
    SHTArrayBucket__update_TR_5.writeAction("move 40(X28) X17 0 8")
    SHTArrayBucket__update_TR_5.writeAction("mov_imm2reg X20 0")
    SHTArrayBucket__update_TR_5.writeAction("bgti X17 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_setup_send_ld")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: empty bucket, writing without search' X0")
    SHTArrayBucket__update_TR_5.writeAction("addi X17 X17 1")
    SHTArrayBucket__update_TR_5.writeAction("move X17 24(X28) 0 8")
    SHTArrayBucket__update_TR_5.writeAction("move X17 40(X28) 0 8")
    SHTArrayBucket__update_TR_5.writeAction("move 8(X28) X21 0 8")
    SHTArrayBucket__update_TR_5.writeAction("sendr_dmlm_wret X21 7 X29 X30")
    SHTArrayBucket__update_TR_5.writeAction("yield")
    SHTArrayBucket__update_TR_5.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_setup_send_ld: mov_imm2reg X18 4")
    SHTArrayBucket__update_TR_5.writeAction("move 8(X28) X19 0 8")
    SHTArrayBucket__update_TR_5.writeAction("mov_imm2reg X21 0")
    SHTArrayBucket__update_TR_5.writeAction("mov_imm2reg X22 0")
    SHTArrayBucket__update_TR_5.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_ld: blei X17 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_done")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: loading, DRAM addr = 0x%x' X0 X19")
    SHTArrayBucket__update_TR_5.writeAction("send_dmlm_ld_wret X19 6 8")
    SHTArrayBucket__update_TR_5.writeAction("addi X20 X20 1")
    SHTArrayBucket__update_TR_5.writeAction("bgti X17 4 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_full")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: all loads sent' X0")
    SHTArrayBucket__update_TR_5.writeAction("mov_reg2reg X17 X18")
    SHTArrayBucket__update_TR_5.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__update_TR_5.writeAction("yield")
    SHTArrayBucket__update_TR_5.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_full: subi X17 X17 4")
    SHTArrayBucket__update_TR_5.writeAction("addi X19 X19 64")
    SHTArrayBucket__update_TR_5.writeAction("blti X20 25 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_ld")
    SHTArrayBucket__update_TR_5.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: send concurrent reached' X0")
    SHTArrayBucket__update_TR_5.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_done: yield")

    ## SHTArrayBucket__update_TR_key_ld_ret with ID 6
    SHTArrayBucket__update_TR_key_ld_ret_6 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 6)
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: load from 0x%x returns, mlp = %d' X0 X3 X20")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("subi X20 X20 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("beqi X22 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_not_done")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("beqi X22 1 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_wait")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bgti X20 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_wait")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: last in-flight load, terminating... TID = %d' X0 TID")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("mov_imm2reg X17 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("sendr_wcont X31 X31 X17 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("yield_terminate")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_wait: yield")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_not_done: bne X3 X19 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_48")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: tail send load returns, num entries = %d' X0 X18")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("beqi X18 4 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_48")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("beqi X18 3 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_32")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("beqi X18 2 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_16")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("beqi X18 1 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_48: beq X14 X29 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_48_match")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bnei X14 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_32")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X3 X21 48")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found empty entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_32: beq X12 X29 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_32_match")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bnei X12 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_16")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X3 X21 32")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found empty entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_16: beq X10 X29 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_16_match")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bnei X10 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X3 X21 16")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found empty entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_0: beq X8 X29 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_0_match")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bnei X8 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_no_match")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X3 X21 0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found empty entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_no_match: bgti X20 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_ld")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: no matched entry found, last send load return' X0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bnei X21 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move 16(X28) X17 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move 40(X28) X18 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("blt X18 X17 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_new_entry")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: bucket full, add FAILED!' X0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move 24(X28) X19 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("sendr_wcont X31 X31 X17 X19")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("subi X17 X17 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] WRITE_END: writer lock freed' X0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("yield_terminate")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_new_entry: move 8(X28) X19 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: storing in a new entry' X0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("lshift X18 X17 4")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("add X19 X17 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X18 X18 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move X18 40(X28) 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_0_match: addi X3 X21 0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found MATCHED entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_16_match: addi X3 X21 16")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found MATCHED entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_32_match: addi X3 X21 32")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found MATCHED entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_check_48_match: addi X3 X21 48")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: found MATCHED entry at addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_st: move 24(X28) X17 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X17 X17 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("move X17 24(X28) 0 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: sending write to addr = 0x%x' X0 X21")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("sendr_dmlm_wret X21 7 X29 X30")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("mov_imm2reg X22 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("yield")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_ld: beqi X17 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_done")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: sending more load from addr = 0x%x' X0 X19")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("send_dmlm_ld_wret X19 6 8")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X20 X20 1")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("bgti X17 4 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_full")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: last send' X0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("mov_reg2reg X17 X18")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("yield")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_LB_send_full: subi X17 X17 4")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("addi X19 X19 64")
    SHTArrayBucket__update_TR_key_ld_ret_6.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_ld_ret_LB_send_done: yield")

    ## SHTArrayBucket__update_TR_key_st_ret with ID 7
    SHTArrayBucket__update_TR_key_st_ret_7 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 7)
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("subi X17 X17 1")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] WRITE_END: writer lock freed' X0")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("bgti X20 0 SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_st_ret_LB_not_done")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: write to 0x%x returns, terminating... TID = %d' X0 X8 TID")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("mov_imm2reg X17 1")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("sendr_wcont X31 X31 X17 X21")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("yield_terminate")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__update_TR_key_st_ret_LB_not_done: mov_imm2reg X22 2")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] UPDATE: write to 0x%x returns, waiting all loads return...' X0 X8")
    SHTArrayBucket__update_TR_key_st_ret_7.writeAction("yield")

    ## SHTArrayBucket__get_TR with ID 8
    SHTArrayBucket__get_TR_8 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 8)
    SHTArrayBucket__get_TR_8.writeAction("add X8 X7 X28")
    SHTArrayBucket__get_TR_8.writeAction("addi X28 X16 0")
    SHTArrayBucket__get_TR_8.writeAction("move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_reader_acquired")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_BEGIN: reader lock busy, delay current event' X0")
    SHTArrayBucket__get_TR_8.writeAction("sendops_wcont X2 X1 X8 2")
    SHTArrayBucket__get_TR_8.writeAction("yield")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_reader_acquired: addi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_BEGIN: reader lock acquired, reader counter = %d' X0 X17")
    SHTArrayBucket__get_TR_8.writeAction("bgtc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_inc_release_reader")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_BEGIN: first active reader, checking writer lock...' X0")
    SHTArrayBucket__get_TR_8.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("bgtc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_release_reader_spin")
    SHTArrayBucket__get_TR_8.writeAction("addi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_BEGIN: writer lock free, writer lock acquired' X0")
    SHTArrayBucket__get_TR_8.writeAction("jmp SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_inc_release_reader")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_release_reader_spin: move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_BEGIN: writer lock busy, free reader lock & delay current event' X0")
    SHTArrayBucket__get_TR_8.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("sendops_wcont X2 X1 X8 2")
    SHTArrayBucket__get_TR_8.writeAction("yield")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_begin_4_inc_release_reader: move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_BEGIN: read permitted, increase reader counter & release reader lock' X0")
    SHTArrayBucket__get_TR_8.writeAction("addi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 2(X16) 0 2")
    SHTArrayBucket__get_TR_8.writeAction("move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: lock admitted' X0")
    SHTArrayBucket__get_TR_8.writeAction("mov_reg2reg X9 X29")
    SHTArrayBucket__get_TR_8.writeAction("mov_reg2reg X1 X31")
    SHTArrayBucket__get_TR_8.writeAction("move 40(X28) X17 0 8")
    SHTArrayBucket__get_TR_8.writeAction("mov_imm2reg X20 0")
    SHTArrayBucket__get_TR_8.writeAction("bgti X17 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_setup_send_ld")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: empty bucket, reply not found' X0")
    SHTArrayBucket__get_TR_8.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__get_TR_8.writeAction("sendr_wcont X31 X31 X17 X29")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_reader_spinwait: move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_reader_acquired")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock busy, loop spin wait (to be freed from another lane)' X0")
    SHTArrayBucket__get_TR_8.writeAction("jmp SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_reader_spinwait")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_reader_acquired: addi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock acquired, reader counter = %d' X0 X17")
    SHTArrayBucket__get_TR_8.writeAction("bgtc X17 1 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_dec_release_reader")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: last active reader, releasing writer lock' X0")
    SHTArrayBucket__get_TR_8.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_dec_release_reader")
    SHTArrayBucket__get_TR_8.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_5_dec_release_reader: move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: read finished, decrement reader counter & release reader lock' X0")
    SHTArrayBucket__get_TR_8.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 2(X16) 0 2")
    SHTArrayBucket__get_TR_8.writeAction("move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_8.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_8.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_8.writeAction("yield_terminate")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_setup_send_ld: mov_imm2reg X18 4")
    SHTArrayBucket__get_TR_8.writeAction("move 8(X28) X19 0 8")
    SHTArrayBucket__get_TR_8.writeAction("mov_imm2reg X21 0")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_ld: blei X17 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_done")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: loading, DRAM addr = 0x%x' X0 X19")
    SHTArrayBucket__get_TR_8.writeAction("send_dmlm_ld_wret X19 9 8")
    SHTArrayBucket__get_TR_8.writeAction("addi X20 X20 1")
    SHTArrayBucket__get_TR_8.writeAction("bgti X17 4 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_full")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: all loads sent' X0")
    SHTArrayBucket__get_TR_8.writeAction("mov_reg2reg X17 X18")
    SHTArrayBucket__get_TR_8.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__get_TR_8.writeAction("yield")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_full: subi X17 X17 4")
    SHTArrayBucket__get_TR_8.writeAction("addi X19 X19 64")
    SHTArrayBucket__get_TR_8.writeAction("blti X20 25 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_ld")
    SHTArrayBucket__get_TR_8.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: send concurrent reached' X0")
    SHTArrayBucket__get_TR_8.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_done: yield")

    ## SHTArrayBucket__get_TR_key_ld_ret with ID 9
    SHTArrayBucket__get_TR_key_ld_ret_9 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 9)
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: load from 0x%x returns, mlp = %d' X0 X3 X20")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X20 X20 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqi X21 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_not_done")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("bgt X20 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_wait")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: last in-flight load, terminating...' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("mov_imm2reg X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("sendr_wcont X31 X31 X17 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("yield_terminate")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_wait: yield")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_not_done: bne X3 X19 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_48")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: tail send load returns, num entries = %d' X0 X18")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqi X18 4 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_48")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqi X18 3 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_32")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqi X18 2 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_16")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqi X18 1 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_48: beq X14 X29 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_48_match")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_32: beq X12 X29 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_32_match")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_16: beq X10 X29 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_16_match")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_0: beq X8 X29 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_0_match")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_no_match: bgti X20 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_send_ld")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: no matched entry found, last send load return, replying' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("sendr_wcont X31 X31 X17 X29")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_reader_spinwait: move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_reader_acquired")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock busy, loop spin wait (to be freed from another lane)' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_reader_spinwait")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_reader_acquired: addi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock acquired, reader counter = %d' X0 X17")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("bgtc X17 1 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_dec_release_reader")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: last active reader, releasing writer lock' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_dec_release_reader")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_6_dec_release_reader: move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: read finished, decrement reader counter & release reader lock' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 2(X16) 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("yield_terminate")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_0_match: mov_reg2reg X9 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: found MATCHED entry at block addr = 0x%x, key = %d, val = %d' X0 X3 X29 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_matched_reply")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_16_match: mov_reg2reg X11 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: found MATCHED entry at block addr = 0x%x, key = %d, val = %d' X0 X3 X29 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_matched_reply")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_32_match: mov_reg2reg X13 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: found MATCHED entry at block addr = 0x%x, key = %d, val = %d' X0 X3 X29 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_matched_reply")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_check_48_match: mov_reg2reg X15 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: found MATCHED entry at block addr = 0x%x, key = %d, val = %d' X0 X3 X29 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_matched_reply")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_matched_reply: bgti X20 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_match_wait_ret")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: matched, reply & terminating...' X0 ")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("mov_imm2reg X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("sendr_wcont X31 X31 X17 X30")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_reader_spinwait: move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_reader_acquired")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock busy, loop spin wait (to be freed from another lane)' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_reader_spinwait")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_reader_acquired: addi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock acquired, reader counter = %d' X0 X17")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("bgtc X17 1 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_dec_release_reader")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: last active reader, releasing writer lock' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_dec_release_reader")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_7_dec_release_reader: move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: read finished, decrement reader counter & release reader lock' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 2(X16) 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("yield_terminate")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_match_wait_ret: mov_imm2reg X21 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: matched but have to wait other loads return...' X0 ")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_reader_spinwait: move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_reader_acquired")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock busy, loop spin wait (to be freed from another lane)' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("jmp SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_reader_spinwait")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_reader_acquired: addi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: reader lock acquired, reader counter = %d' X0 X17")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("bgtc X17 1 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_dec_release_reader")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: last active reader, releasing writer lock' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 1(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("beqc X17 0 SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_dec_release_reader")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 1(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_LB_mrsw_lock_0_read_end_8_dec_release_reader: move 2(X16) X17 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][MRSWLock 0] READ_END: read finished, decrement reader counter & release reader lock' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 2(X16) 0 2")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move 0(X16) X17 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("subi X17 X17 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("move X17 0(X16) 0 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("yield")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_send_ld: beqi X17 0 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_send_done")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: sending more load from addr = 0x%x' X0 X19")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("send_dmlm_ld_wret X19 9 8")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("addi X20 X20 1")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("bgti X17 4 SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_full")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("print '[DEBUG][NWID %d][SHTArrayBucket] GET: last send' X0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("mov_reg2reg X17 X18")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("mov_imm2reg X17 0")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("yield")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_LB_send_full: subi X17 X17 4")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("addi X19 X19 64")
    SHTArrayBucket__get_TR_key_ld_ret_9.writeAction("SHTExampleEFA_pydub_SHTArrayBucket__get_TR_key_ld_ret_LB_send_done: yield")

    ## SHT__initialize_TR with ID 10
    SHT__initialize_TR_10 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 10)
    SHT__initialize_TR_10.writeAction("print '[DEBUG][NWID %d][SHT] INIT' X0")
    SHT__initialize_TR_10.writeAction("print '[DEBUG][NWID %d][SHT] INIT, num_alloc_lanes = %d, bucket_per_lane = %d, ent_per_bucket = %d' X0 X11 X14 X15")
    SHT__initialize_TR_10.writeAction("addi X1 X31 0")
    SHT__initialize_TR_10.writeAction("mov_imm2reg X16 6")
    SHT__initialize_TR_10.writeAction("add X8 X7 X17")
    SHT__initialize_TR_10.writeAction("bcopy_ops X10 X17 X16")
    SHT__initialize_TR_10.writeAction("mov_reg2reg X10 X16")
    SHT__initialize_TR_10.writeAction("add X10 X11 X17")
    SHT__initialize_TR_10.writeAction("addi X12 X18 0")
    SHT__initialize_TR_10.writeAction("muli X14 X19 48")
    SHT__initialize_TR_10.writeAction("add X19 X18 X19")
    SHT__initialize_TR_10.writeAction("lshift X15 X21 4")
    SHT__initialize_TR_10.writeAction("addi X13 X22 0")
    SHT__initialize_TR_10.writeAction("mov_imm2reg X24 0")
    SHT__initialize_TR_10.writeAction("add X9 X7 X23")
    SHT__initialize_TR_10.writeAction("move X15 16(X23) 0 8")
    SHT__initialize_TR_10.writeAction("move X19 24(X23) 0 8")
    SHT__initialize_TR_10.writeAction("SHTExampleEFA_pydub_SHT__initialize_TR_LB_lane_init_next: move X18 0(X23) 0 8")
    SHT__initialize_TR_10.writeAction("move X22 8(X23) 0 8")
    SHT__initialize_TR_10.writeAction("print '[DEBUG][NWID %d][SHT] INIT: dst nwid = %d, bucket = %d, bucket desc lm addr = %d' X0 X16 X24 X18")
    SHT__initialize_TR_10.writeAction("ev_update_2 X25 4 255 5")
    SHT__initialize_TR_10.writeAction("ev_update_reg_2 X25 X25 X16 X16 8")
    SHT__initialize_TR_10.writeAction("send_wret X25 11 X23 4")
    SHT__initialize_TR_10.writeAction("add X22 X21 X22")
    SHT__initialize_TR_10.writeAction("addi X18 X18 48")
    SHT__initialize_TR_10.writeAction("addi X24 X24 1")
    SHT__initialize_TR_10.writeAction("blt X24 X14 SHTExampleEFA_pydub_SHT__initialize_TR_LB_lane_init_next")
    SHT__initialize_TR_10.writeAction("addi X16 X16 1")
    SHT__initialize_TR_10.writeAction("bge X16 X17 SHTExampleEFA_pydub_SHT__initialize_TR_LB_lane_init_done")
    SHT__initialize_TR_10.writeAction("mov_imm2reg X24 0")
    SHT__initialize_TR_10.writeAction("addi X12 X18 0")
    SHT__initialize_TR_10.writeAction("blt X16 X17 SHTExampleEFA_pydub_SHT__initialize_TR_LB_lane_init_next")
    SHT__initialize_TR_10.writeAction("SHTExampleEFA_pydub_SHT__initialize_TR_LB_lane_init_done: mul X11 X14 X23")
    SHT__initialize_TR_10.writeAction("yield")

    ## SHT__initialize_TR_lane_init_ret with ID 11
    SHT__initialize_TR_lane_init_ret_11 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 11)
    SHT__initialize_TR_lane_init_ret_11.writeAction("subi X23 X23 1")
    SHT__initialize_TR_lane_init_ret_11.writeAction("print '[DEBUG][NWID %d][SHT] INIT: bucket on NWID %d initialized.' X0 X8")
    SHT__initialize_TR_lane_init_ret_11.writeAction("bnei X23 0 SHTExampleEFA_pydub_SHT__initialize_TR_lane_init_ret_LB_yield")
    SHT__initialize_TR_lane_init_ret_11.writeAction("print '[DEBUG][NWID %d][SHT] INIT: done, terminating' X0")
    SHT__initialize_TR_lane_init_ret_11.writeAction("sendr_wcont X31 X31 X0 X0")
    SHT__initialize_TR_lane_init_ret_11.writeAction("yield_terminate")
    SHT__initialize_TR_lane_init_ret_11.writeAction("SHTExampleEFA_pydub_SHT__initialize_TR_lane_init_ret_LB_yield: yield")

    ## SHT__finalize_TR with ID 12
    SHT__finalize_TR_12 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 12)
    SHT__finalize_TR_12.writeAction("sendr_wcont X1 X1 X0 X0")
    SHT__finalize_TR_12.writeAction("yield_terminate")

    ## SHT__update_TR with ID 13
    SHT__update_TR_13 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 13)
    SHT__update_TR_13.writeAction("add X8 X7 X22")
    SHT__update_TR_13.writeAction("add X9 X7 X23")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: key = %d' X0 X10")
    SHT__update_TR_13.writeAction("mov_imm2reg X16 0")
    SHT__update_TR_13.writeAction("hash X10 X16")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: hash = %d' X0 X16")
    SHT__update_TR_13.writeAction("move 8(X22) X17 0 8")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: num lane = %d' X0 X17")
    SHT__update_TR_13.writeAction("subi X17 X17 1")
    SHT__update_TR_13.writeAction("andr X16 X17 X18")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: nwid offset = %d' X0 X18")
    SHT__update_TR_13.writeAction("move 0(X22) X19 0 8")
    SHT__update_TR_13.writeAction("add X19 X18 X19")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: dst nwid = %d' X0 X19")
    SHT__update_TR_13.writeAction("andi X19 X18 63")
    SHT__update_TR_13.writeAction("move 32(X22) X17 0 8")
    SHT__update_TR_13.writeAction("subi X17 X17 1")
    SHT__update_TR_13.writeAction("rshift X16 X16 32")
    SHT__update_TR_13.writeAction("andr X16 X17 X17")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: lane bucket off = %d' X0 X17")
    SHT__update_TR_13.writeAction("muli X17 X17 48")
    SHT__update_TR_13.writeAction("move 16(X22) X20 0 8")
    SHT__update_TR_13.writeAction("add X20 X17 X17")
    SHT__update_TR_13.writeAction("print '[DEBUG][NWID %d][SHT] UPDATE: bucket desc lm offset = %d' X0 X17")
    SHT__update_TR_13.writeAction("move X17 0(X23) 0 8")
    SHT__update_TR_13.writeAction("move X10 8(X23) 0 8")
    SHT__update_TR_13.writeAction("move X11 16(X23) 0 8")
    SHT__update_TR_13.writeAction("ev_update_2 X20 5 255 5")
    SHT__update_TR_13.writeAction("ev_update_reg_2 X20 X20 X19 X19 8")
    SHT__update_TR_13.writeAction("send_wcont X20 X1 X23 3")
    SHT__update_TR_13.writeAction("yield_terminate")

    ## SHT__get_TR with ID 14
    SHT__get_TR_14 = SHTExampleEFA_pydub_state1_0.writeTransition("eventCarry", SHTExampleEFA_pydub_state1_0, SHTExampleEFA_pydub_state1_0, 14)
    SHT__get_TR_14.writeAction("add X8 X7 X22")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: key = %d' X0 X9")
    SHT__get_TR_14.writeAction("mov_imm2reg X16 0")
    SHT__get_TR_14.writeAction("hash X9 X16")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: hash = %d' X0 X16")
    SHT__get_TR_14.writeAction("move 8(X22) X17 0 8")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: num lane = %d' X0 X17")
    SHT__get_TR_14.writeAction("subi X17 X17 1")
    SHT__get_TR_14.writeAction("andr X16 X17 X18")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: nwid offset = %d' X0 X18")
    SHT__get_TR_14.writeAction("move 0(X22) X19 0 8")
    SHT__get_TR_14.writeAction("add X19 X18 X19")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: dst nwid = %d' X0 X19")
    SHT__get_TR_14.writeAction("andi X19 X18 63")
    SHT__get_TR_14.writeAction("move 32(X22) X17 0 8")
    SHT__get_TR_14.writeAction("subi X17 X17 1")
    SHT__get_TR_14.writeAction("rshift X16 X16 32")
    SHT__get_TR_14.writeAction("andr X16 X17 X17")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: lane bucket off = %d' X0 X17")
    SHT__get_TR_14.writeAction("muli X17 X17 48")
    SHT__get_TR_14.writeAction("move 16(X22) X20 0 8")
    SHT__get_TR_14.writeAction("add X20 X17 X17")
    SHT__get_TR_14.writeAction("print '[DEBUG][NWID %d][SHT] GET: bucket desc lm offset = %d' X0 X17")
    SHT__get_TR_14.writeAction("ev_update_2 X20 8 255 5")
    SHT__get_TR_14.writeAction("ev_update_reg_2 X20 X20 X19 X19 8")
    SHT__get_TR_14.writeAction("sendr_wcont X20 X1 X17 X9")
    SHT__get_TR_14.writeAction("yield_terminate")



def main():
    efa = EFA([])
    efa.code_level = 'machine'
    efaProgram_sht_test_out(efa)
    return efa

```

### Header file

```c++
#ifndef __sht_test_out_H__
#define __sht_test_out_H__

namespace sht_test_out {

    typedef unsigned int EventSymbol;

    constexpr EventSymbol entry_init = 0;
    constexpr EventSymbol init_ret = 1;
    constexpr EventSymbol update_ret = 2;
    constexpr EventSymbol get_ret = 3;
    constexpr EventSymbol SHTArrayBucket__initialize_TR = 4;
    constexpr EventSymbol SHTArrayBucket__update_TR = 5;
    constexpr EventSymbol SHTArrayBucket__update_TR_key_ld_ret = 6;
    constexpr EventSymbol SHTArrayBucket__update_TR_key_st_ret = 7;
    constexpr EventSymbol SHTArrayBucket__get_TR = 8;
    constexpr EventSymbol SHTArrayBucket__get_TR_key_ld_ret = 9;
    constexpr EventSymbol SHT__initialize_TR = 10;
    constexpr EventSymbol SHT__initialize_TR_lane_init_ret = 11;
    constexpr EventSymbol SHT__finalize_TR = 12;
    constexpr EventSymbol SHT__update_TR = 13;
    constexpr EventSymbol SHT__get_TR = 14;

} // namespace

#endif

```
